<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wire Size Calculator - NEC 310.16 Ampacity | Sparky HQ</title>
    <meta name="description" content="Free wire size calculator for electricians. Determine minimum conductor size per NEC 310.16 ampacity tables with automatic voltage drop verification.">
    <link rel="icon" type="image/png" href="/assets/logo.png">
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#1c1c1c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <link rel="stylesheet" href="/css/style.css?v=7">
</head>
<body>
    <header class="site-header">
        <div class="container">
            <a href="/" class="logo"><img src="/assets/logo.png" alt="Sparky HQ" height="50"></a>
            <nav>
                <a href="/tools/">Tools</a>
                <a href="/about.html">About</a>
            </nav>
        </div>
    </header>

    <main>
        <section class="calc-page">
            <div class="container">
                <h1>Wire Size Calculator <span class="nec-ref">NEC 310.16</span></h1>
                <p class="subtitle">Determine minimum conductor size based on ampacity and verify voltage drop. Automatically upsizes if voltage drop exceeds 3%.</p>

                <div class="calc-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="amps">Load (Amps)</label>
                            <input type="number" id="amps" placeholder="e.g. 40" min="0" step="0.1">
                        </div>
                        <div class="form-group">
                            <label for="voltage">System Voltage</label>
                            <select id="voltage">
                                <option value="120">120V</option>
                                <option value="208">208V</option>
                                <option value="240" selected>240V</option>
                                <option value="277">277V</option>
                                <option value="480">480V</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="phase">Phase</label>
                            <select id="phase">
                                <option value="1" selected>Single Phase</option>
                                <option value="3">Three Phase</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="distance">One-Way Distance (ft)</label>
                            <input type="number" id="distance" placeholder="e.g. 150" min="0" step="1">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="material">Conductor Material</label>
                            <select id="material">
                                <option value="copper" selected>Copper</option>
                                <option value="aluminum">Aluminum</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="tempRating">Insulation Temperature Rating</label>
                            <select id="tempRating">
                                <option value="60">60°C (TW, UF)</option>
                                <option value="75" selected>75°C (THW, THWN, XHHW)</option>
                                <option value="90">90°C (THHN, THWN-2, XHHW-2)</option>
                            </select>
                        </div>
                    </div>
                    <button class="btn" onclick="calculate()">Calculate</button>
                </div>

                <div class="result" id="result">
                    <div class="result-section">
                        <div class="result-value" id="recWire">—</div>
                        <div class="result-label">Recommended Wire Size</div>
                    </div>
                    <table class="breakdown-table">
                        <tr><td>Ampacity at Size</td><td id="ampacity">—</td></tr>
                        <tr><td>Minimum by Ampacity</td><td id="minAmpacity">—</td></tr>
                        <tr><td>Minimum by Voltage Drop (3%)</td><td id="minVD">—</td></tr>
                        <tr><td>Voltage Drop at Recommended Size</td><td id="vdAtSize">—</td></tr>
                    </table>
                </div>
            </div>
        </section>
    </main>

    <footer class="site-footer">
        <div class="container">
            <p>&copy; 2026 Sparky HQ.</p>
            <p>Tools are for reference only. Always verify with the current NEC and local amendments.</p>
        </div>
    </footer>

    <script>
    // Wire sizes in order from smallest to largest
    const wireSizes = ['14','12','10','8','6','4','3','2','1','1/0','2/0','3/0','4/0','250','300','350','400','500','600','750'];

    // NEC Table 310.16 - Allowable ampacities (amperes)
    // [60°C, 75°C, 90°C]
    const ampacityTable = {
        copper: {
            '14':  [15, 20, 25],
            '12':  [20, 25, 30],
            '10':  [30, 35, 40],
            '8':   [40, 50, 55],
            '6':   [55, 65, 75],
            '4':   [70, 85, 95],
            '3':   [85, 100, 115],
            '2':   [95, 115, 130],
            '1':   [110, 130, 145],
            '1/0': [125, 150, 170],
            '2/0': [145, 175, 195],
            '3/0': [165, 200, 225],
            '4/0': [195, 230, 260],
            '250': [215, 255, 290],
            '300': [240, 285, 320],
            '350': [260, 310, 350],
            '400': [280, 335, 380],
            '500': [320, 380, 430],
            '600': [350, 420, 475],
            '750': [385, 460, 535]
        },
        aluminum: {
            '14':  [null, null, null],
            '12':  [15, 20, 25],
            '10':  [25, 30, 35],
            '8':   [30, 40, 45],
            '6':   [40, 50, 60],
            '4':   [55, 65, 75],
            '3':   [65, 75, 85],
            '2':   [75, 90, 100],
            '1':   [85, 100, 115],
            '1/0': [100, 120, 135],
            '2/0': [115, 135, 150],
            '3/0': [130, 155, 175],
            '4/0': [150, 180, 205],
            '250': [170, 205, 230],
            '300': [190, 230, 255],
            '350': [210, 250, 280],
            '400': [225, 270, 305],
            '500': [260, 310, 350],
            '600': [285, 340, 385],
            '750': [320, 385, 435]
        }
    };

    // NEC Chapter 9 Table 8 - DC Resistance at 75°C (ohms per 1000 ft)
    const wireResistance = {
        copper: {
            '14': 3.14, '12': 1.98, '10': 1.24, '8': 0.778,
            '6': 0.491, '4': 0.308, '3': 0.245, '2': 0.194,
            '1': 0.154, '1/0': 0.122, '2/0': 0.0967, '3/0': 0.0766,
            '4/0': 0.0608, '250': 0.0515, '300': 0.0429, '350': 0.0367,
            '400': 0.0321, '500': 0.0258, '600': 0.0214, '750': 0.0171
        },
        aluminum: {
            '14': 5.17, '12': 3.25, '10': 2.04, '8': 1.28,
            '6': 0.808, '4': 0.508, '3': 0.403, '2': 0.319,
            '1': 0.253, '1/0': 0.201, '2/0': 0.159, '3/0': 0.126,
            '4/0': 0.100, '250': 0.0847, '300': 0.0707, '350': 0.0605,
            '400': 0.0529, '500': 0.0424, '600': 0.0353, '750': 0.0282
        }
    };

    function getTempIndex(temp) {
        if (temp === '60') return 0;
        if (temp === '75') return 1;
        return 2; // 90
    }

    function getAmpacity(size, material, tempIdx) {
        const val = ampacityTable[material][size];
        return val ? val[tempIdx] : null;
    }

    function calcVD(amps, distance, wireSize, material, voltage, phase) {
        const R = wireResistance[material][wireSize];
        const factor = phase === 3 ? 1.732 : 2;
        return (factor * distance * amps * R) / 1000;
    }

    function calculate() {
        const amps = parseFloat(document.getElementById('amps').value);
        const voltage = parseFloat(document.getElementById('voltage').value);
        const phase = parseInt(document.getElementById('phase').value);
        const distance = parseFloat(document.getElementById('distance').value);
        const material = document.getElementById('material').value;
        const tempRating = document.getElementById('tempRating').value;
        const tempIdx = getTempIndex(tempRating);

        if (!amps || !distance) {
            alert('Enter load amps and distance.');
            return;
        }

        // Find minimum wire size by ampacity
        let minByAmpacity = null;
        for (const size of wireSizes) {
            const amp = getAmpacity(size, material, tempIdx);
            if (amp !== null && amp >= amps) {
                minByAmpacity = size;
                break;
            }
        }

        if (!minByAmpacity) {
            alert('Load exceeds maximum ampacity in NEC 310.16 for selected options.');
            return;
        }

        // Find minimum wire size by voltage drop (3%)
        let minByVD = null;
        for (const size of wireSizes) {
            const vd = calcVD(amps, distance, size, material, voltage, phase);
            const vdPct = (vd / voltage) * 100;
            if (vdPct <= 3) {
                minByVD = size;
                break;
            }
        }

        // Take the larger of the two (higher index = larger wire)
        let recommended;
        if (!minByVD) {
            recommended = minByAmpacity;
            minByVD = 'Exceeds all sizes';
        } else {
            const idxAmp = wireSizes.indexOf(minByAmpacity);
            const idxVD = wireSizes.indexOf(minByVD);
            recommended = wireSizes[Math.max(idxAmp, idxVD)];
        }

        const recAmpacity = getAmpacity(recommended, material, tempIdx);
        const recVD = calcVD(amps, distance, recommended, material, voltage, phase);
        const recVDPct = (recVD / voltage) * 100;

        document.getElementById('recWire').textContent = recommended + (parseInt(recommended) ? ' AWG' : ' kcmil');
        document.getElementById('ampacity').textContent = recAmpacity + 'A at ' + tempRating + '°C';
        document.getElementById('minAmpacity').textContent = minByAmpacity + (parseInt(minByAmpacity) ? ' AWG' : ' kcmil');
        document.getElementById('minVD').textContent = typeof minByVD === 'string' ? minByVD : minByVD + (parseInt(minByVD) ? ' AWG' : ' kcmil');

        const pass = recVDPct <= 3;
        document.getElementById('vdAtSize').innerHTML = recVD.toFixed(2) + 'V (' + recVDPct.toFixed(2) + '%) — <span class="' + (pass ? 'result-pass' : 'result-fail') + '">' + (pass ? 'PASS' : 'EXCEEDS 3%') + '</span>';

        document.getElementById('result').classList.add('show');
    }
    </script>
    <script src="/js/app.js" defer></script>
</body>
</html>
